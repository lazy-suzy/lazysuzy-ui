<div class="flex flex-column mh3-ns" *ngIf="products">
  <ng-container *ngIf="isHandset">
    <div class="{{
        showBar === true ? 'mobile-filter-panel fixed' : 'mobile-filter-panel'
      }}" (scroll)="(checkScroll)">
      <span class="icon-container" (click)="toggleMobileFilter()">
        <mat-icon aria-hidden="false" aria-label="Filter">
          filter_list
        </mat-icon>
        <span class="icon-title">Filter</span>
      </span>
      <span class="icon-container" (click)="toggleMobileView()">
        <mat-icon aria-hidden="false" aria-label="toggle">
          view_module
        </mat-icon>
        <span class="icon-title">Toggle</span>
      </span>
      <span class="icon-container" (click)="toggleMobileSort()">
        <mat-icon aria-hidden="false" aria-label="Sort">
          import_export
        </mat-icon>
        <span class="icon-title">Sort</span>
      </span>
      <app-product-filter-mobile *ngIf="showMobileFilter" (setMobileToggle)="onSetMobileToggle($event)"
        [productFilters]="productFilters" [isProductFetching]="isProductFetching" [totalCount]="totalCount"
        (setFilters)="onSetFilters($event)">
      </app-product-filter-mobile>
      <app-product-sort-mobile *ngIf="showMobileSort" (setSortToggle)="onSetSortToggle($event)"
        [sortTypeList]="sortTypeList" (setSortType)="onSetSortType($event)">
      </app-product-sort-mobile>
    </div>
  </ng-container>


  <div class="flex flex-wrap justify-between" [ngClass]="{'products-container': !isHandset}" infiniteScroll
    [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50" (scrolled)="onScroll()">
    <ng-container *ngIf="isHandset">
      <app-product-mobile *ngFor="let product of products" [product]="product" [productsInRow]="productsInRow"
        [ngClass]="{
          'w-50': productsInRow === 2,
          'w-33': productsInRow === 3,
          'w-100': productsInRow === 1
        }" class="w-50"></app-product-mobile>
    </ng-container>

    <!-- brandlist -->
    <ng-container *ngIf="!isHandset">
      <div class="brandlist-container brandlist-left">
        <app-brand-list [selectedBrandValue]="selectedBrandValue" [isBrandPage]="isBrandPage"
          (setBrand)="getProductwithBrandName($event)"></app-brand-list>
      </div>
    </ng-container>
    <!-- / brandlist -->

    <ng-container *ngIf="!isHandset">
      <!-- show brand data -->
      <ng-container *ngIf="filters && !isHandset && isBrandPage">
        <div class="branddata-container w-100">
          <p class="brand-name">{{ brandData.name }}</p>
          <p class="brand-description">{{ brandData.description }}</p>
        </div>
      </ng-container>
      <!-- / show brand data -->

      <!-- filter bar -->
      <ng-container *ngIf="!isHandset">
        <!-- <h4 class="category-title">{{ category }}</h4> -->
        <div class="filter-panel flex justify-around items-center w-100">
          <app-product-filters [isBrandPage]="isBrandPage" [productFilters]="productFilters"
            [isChangingBrandList]="isChangingBrandList" (setFilters)="onSetFilters($event)"
            class="flex justify-start w-75"></app-product-filters>
          <div style="font-size: 14px; min-width: 110px">{{ totalCount }} Results</div>
          <app-sort-type [sortTypeList]="sortTypeList" (setSortType)="onSetSortType($event)">
          </app-sort-type>
        </div>
      </ng-container>
      <!-- /filter bar -->
      <ng-container *ngIf="!isChangingBrandList">
        <app-product
          *ngFor="let product of products"
          [product]="product"
          class="w-33-ns"
          style="margin-bottom: 15px;"
        ></app-product>        
      </ng-container>
    </ng-container>
  </div>
</div>
<img *ngIf="isProductFetching" [src]="spinner" class="loader" />
<button class="scroll-to-btn f6 dib white bg-near-black" *ngIf="isIconShow" (click)="gotoTop()">
  <mat-icon class="account-icon pointer" aria-hidden="false" aria-label="Account">
    arrow_upward</mat-icon>
</button>